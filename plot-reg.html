<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Plot Registration</title>

<style>
body{
  font-family:"Segoe UI",Arial,sans-serif;
  background:linear-gradient(135deg,#eef2f7,#f9fbfd);
  padding:20px;
}
h2{text-align:center;color:#333}

/* FORM */
form{
  max-width:500px;
  margin:40px auto;
  background:#fff;
  padding:22px;
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,0.08);
}
input,select,button{
  width:100%;
  padding:11px;
  margin:8px 0;
  border:1px solid #ddd;
  border-radius:6px;
  font-size:14px;
}
input[readonly]{
  background:#f1f3f5;
}
button{
  background:linear-gradient(135deg,#007bff,#0056d2);
  color:#fff;
  border:none;
  cursor:pointer;
  font-weight:bold;
}
button:hover{opacity:.9}
small{color:#666}
</style>
</head>

<body>

<h2>üìù Plot Registration</h2>

<form id="plotForm">
  <input id="plotNumber" placeholder="Plot Number (A1, A2...)" required>

  <label>
    Plot Size (Decimal)
    <small>1 Decimal = 435.56 Sq Ft</small>
  </label>
  <input id="plotSize" type="number" step="0.01" required>

  <label>Plot Size (Sq Ft) (Auto)</label>
  <input id="plotSqft" type="number" readonly>

  <label>Front Side</label>
  <input id="frontSide" type="text" placeholder="Front side info">

  <label>Back Side</label>
  <input id="backSide" type="text" placeholder="Back side info">

  <label>Right Side</label>
  <input id="rightSide" type="text" placeholder="Right side info">

  <label>Left Side</label>
  <input id="leftSide" type="text" placeholder="Left side info">

  <!-- <label>Front Side</label>
  <input id="frontSide" type="text" placeholder="Front side info">

  <label>Back Side</label>
  <input id="backSide" type="text" placeholder="Back side info"> -->

  <label>
    Price per Decimal
    <small>Enter price for 1 Decimal</small>
  </label>
  <input id="pricePerDec" type="number" step="0.01" required>

  <label>Net Amount (Auto)</label>
  <input id="netAmount" type="number" readonly>

  <select id="plotStatus" required>
    <option value="">Select Status</option>
    <option value="unsold">Unsold</option>
    <option value="reserved">Reserved</option>
  </select>

  <button type="submit">Save Plot</button>
</form>

<script>
let registeredPlots = JSON.parse(localStorage.getItem("registeredPlots") || "{}");
let viewedPlots = JSON.parse(localStorage.getItem("viewedPlots") || "[]");

const DECIMAL_TO_SQFT = 435.56;

// AUTO CALCULATE
const plotSize = document.getElementById("plotSize");
const plotSqft = document.getElementById("plotSqft");
const pricePerDec = document.getElementById("pricePerDec");
const netAmount = document.getElementById("netAmount");

function calculateValues(){
  const decimal = Number(plotSize.value || 0);
  const price = Number(pricePerDec.value || 0);

  plotSqft.value = (decimal * DECIMAL_TO_SQFT).toFixed(2);
  netAmount.value = (decimal * price).toFixed(2);
}


plotSize.addEventListener("input", calculateValues);
pricePerDec.addEventListener("input", calculateValues);

// SAVE PLOT
document.getElementById("plotForm").addEventListener("submit", e=>{
  e.preventDefault();

  const plotNo = document.getElementById("plotNumber").value.trim().toUpperCase();

  registeredPlots[plotNo] = {
    plotNo,
    size: Number(plotSize.value),
    sqft: Number(plotSqft.value),
    right: rightSide.value.trim(),
    left: leftSide.value.trim(),
    front: frontSide.value.trim(),
    back: backSide.value.trim(),
    pricePerDec: Number(pricePerDec.value),
    netAmount: Number(netAmount.value),
    status: plotStatus.value,
    createdAt: Date.now()
  };

  // üëâ STORE VIEWED LIST
  if(!viewedPlots.includes(plotNo)){
    viewedPlots.push(plotNo);
    localStorage.setItem("viewedPlots", JSON.stringify(viewedPlots));
  }

  localStorage.setItem("registeredPlots", JSON.stringify(registeredPlots));

  alert(`Plot ${plotNo} saved successfully!`);

  e.target.reset();
  plotSqft.value = "";
  netAmount.value = "";

  // üëâ redirect to viewed list page
  window.location.href = "viewed-plots.html";
});
</script>


</body>
</html>
